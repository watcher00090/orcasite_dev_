<html>
<head>
    <script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
    <script src="https://preview.babylonjs.com/ammo.js"></script>
    <script src="https://preview.babylonjs.com/cannon.js"></script>
    <script src="https://preview.babylonjs.com/Oimo.js"></script>
    <script src="https://preview.babylonjs.com/libktx.js"></script>
    <script src="https://preview.babylonjs.com/earcut.min.js"></script>
    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>
    <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
    <script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
    <script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
    <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script>
    <script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
    <script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>

    <style>
        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>

</head>

<body>

<h1>
    Welcome to the teaching UI!
</h1>

<p>
    We're glad you're here!
</p>

<canvas id="renderCanvas"></canvas>

<script>
    var canvas = document.getElementById("renderCanvas");

    var engine = null;
    var scene = null;
    var sceneToRender = null;
    var createDefaultEngine = function() { return new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true }); };
    
    var createScene = function () {
        var scene = new BABYLON.Scene(engine);
        
        /*
        var camera = new BABYLON.ArcRotateCamera("cam", 
                                                    -Math.PI / 2, 
                                                    Math.PI / 2, 
                                                    10, 
                                                    BABYLON.Vector3.Zero());
        */
        var camera = new BABYLON.UniversalCamera("cam", BABYLON.Vector3.Zero());
        camera.noRotationConstraint = true;
        //var anchor = new BABYLON.TransformNode("");
        
        /*
        var gizmoManager = new BABYLON.GizmoManager(scene);
        gizmoManager.positionGizmoEnabled = true;
        gizmoManager.rotationGizmoEnabled = false;
        gizmoManager.scaleGizmoEnabled = false;
        gizmoManager.boundingBoxGizmoEnabled = false;
        var customMesh = new BABYLON.Mesh("custom", scene);
        var positions = [0, 0, 0];
        var indices = [0];
        var vertexData = new BABYLON.VertexData();
        vertexData.positions = positions;
        vertexData.indices = indices;    
        vertexData.applyToMesh(customMesh, true);
        gizmoManager.attachableMeshes = [customMesh];
        gizmoManager.gizmos.positionGizmo;
        gizmoManager.gizmos.positionGizmo.xGizmo.dragBehavior.onDragStartObservable.add(()=>{
            console.log("Position gizmo's x axis started to be dragged");
        });
        gizmoManager.gizmos.positionGizmo.xGizmo.dragBehavior.onDragEndObservable.add(()=>{
            console.log("Position gizmo's x axis drag was ended");
        });
        */

    
        //camera.wheelDeltaPercentage = 0.01;
        //camera.attachControl(canvas, true);
    
        // Create the 3D UI manager
        var manager = new BABYLON.GUI.GUI3DManager(scene);
    
        var panel = new BABYLON.GUI.StackPanel3D();
        //panel.margin = 0.2;
    
        manager.addControl(panel);
        //panel.linkToTransformNode(anchor);
        panel.position.z = -1.5;
    
        // Let's add some buttons!
        var addButton = function() {
            var button = new BABYLON.GUI.HolographicButton("orientation");
            panel.addControl(button);
    
            button.text = "Button #" + panel.children.length;
        }
    
        panel.blockLayout = true;
        for (var index = 0; index < 60; index++) {
            addButton();    
        }
        panel.blockLayout = false;


        var leftArrowButton = new BABYLON.GUI.HolographicButton("left arrow");
        panel.addControl(leftArrowButton);

        var rightArrowButton = new BABYLON.GUI.HolographicButton("right arrow");
        panel.addControl(rightArrowButton);
    

        return scene;
    
    };
    
    var engine;
    try {
        engine = createDefaultEngine();
    } catch(e) {
        console.log("the available createEngine function failed. Creating the default engine instead");
        engine = createDefaultEngine();
    }
    if (!engine) throw 'engine should not be null.';
    scene = createScene();
    sceneToRender = scene;

    engine.runRenderLoop(function () {
        if (sceneToRender) {
            sceneToRender.render();
        }
    });

    // Resize
    window.addEventListener("resize", function () {
        engine.resize();
    });

</script>
</body>
</html>